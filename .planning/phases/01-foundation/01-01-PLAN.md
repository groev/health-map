---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Set up project infrastructure with Mantine UI library, app shell layout, and reusable local storage hook.

Purpose: Establish the foundation all features depend on - consistent UI components, layout structure, and persistence mechanism.
Output: Working app with Mantine theming, app shell with header, and useLocalStorage hook ready for use.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/main.tsx
@src/App.tsx
@package.json

**Core value:** Data entry must be fast and frictionless.
**Tech stack:** Vite + React 19 + TypeScript (already configured)
**Constraint:** Offline-first, browser-only, no backend
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure Mantine with theme provider</name>
  <files>package.json, src/main.tsx</files>
  <action>
    1. Install Mantine core packages: @mantine/core @mantine/hooks
    2. Install PostCSS dependencies for Mantine: postcss postcss-preset-mantine postcss-simple-vars
    3. Create postcss.config.cjs with mantine preset
    4. Update src/main.tsx to wrap App in MantineProvider with default theme
    5. Import @mantine/core/styles.css in main.tsx
    6. Remove the default Vite CSS imports (index.css, App.css) - we'll use Mantine styling

    Use colorScheme: 'auto' to respect system preference initially (we'll add manual toggle in Phase 6).
  </action>
  <verify>npm run dev starts without errors, browser shows app with Mantine default styling</verify>
  <done>MantineProvider wraps app, Mantine styles load, no CSS conflicts</done>
</task>

<task type="auto">
  <name>Task 2: Create app shell layout with header</name>
  <files>src/App.tsx, src/App.css (delete)</files>
  <action>
    1. Delete src/App.css (no longer needed)
    2. Delete src/index.css (no longer needed)
    3. Replace App.tsx content with Mantine AppShell component:
       - AppShell with header={{ height: 60 }}
       - AppShell.Header containing title "Health Map" using Title component
       - AppShell.Main for content area (placeholder text for now)
    4. Use Mantine's Container component inside Main for max-width constraint

    Keep it minimal - just the structural shell. No navigation links yet (single-page app for now, routing can be added later if needed).
  </action>
  <verify>npm run dev shows app with header bar containing "Health Map" title and main content area</verify>
  <done>AppShell renders with header and main content area, responsive layout works</done>
</task>

<task type="auto">
  <name>Task 3: Create useLocalStorage hook for persistence</name>
  <files>src/hooks/useLocalStorage.ts</files>
  <action>
    1. Create src/hooks/ directory
    2. Create useLocalStorage.ts with generic hook:
       - Signature: useLocalStorage<T>(key: string, initialValue: T): [T, (value: T | ((prev: T) => T)) => void]
       - On mount: read from localStorage, parse JSON, fall back to initialValue if missing/invalid
       - On set: write to localStorage as JSON
       - Handle JSON parse errors gracefully (return initialValue)
       - Support function updater pattern like useState
    3. Export the hook as default and named export

    This hook will be used by Phase 2 to persist all health data.
  </action>
  <verify>Import hook in App.tsx, test with a simple counter that persists across refresh</verify>
  <done>Hook correctly reads/writes localStorage, survives page refresh, handles missing/invalid data</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run dev` shows app with Mantine styling
- [ ] Header displays "Health Map" title
- [ ] useLocalStorage hook works (test with simple state)
- [ ] No TypeScript errors
- [ ] No console errors in browser
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Mantine provider configured with auto color scheme
- App shell layout renders correctly
- useLocalStorage hook is reusable and type-safe
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
